<div class="step-intro">
  <p class="step-title">Flyer Verteilung</p>
  <h2>Wann und wo sollen Ihre Flyer verteilt werden?</h2>
  <p>Definieren Sie hier Ihre Zielgebiete für die Flyerverteilung.</p>
</div>

<div class="mb-3">
  <label for="distributionArea" class="form-label">Geben Sie die gewünschte Postleitzahl, den gewünschten Postleitzahlenbereich oder den Ortsnamen ein</label>

  <div class="input-group flex-nowrap">
    <span class="input-group-text" id="search"><i class="mdi mdi-magnify"></i></span>
    <input type="text"
           id="distributionArea"
           class="form-control"
           placeholder="8001 oder 8001-8004 oder Zürich"
           aria-label="Suche"
           (input)="updateLocalValidationStatus($any($event.target).value ? ($any($event.target).value.length > 2 ? 'valid' : 'pending') : 'invalid')">
    <button class="btn btn-primary" type="button">Hinzufügen</button>
    <button class="btn btn-outline-secondary" type="button"><i class="mdi mdi-delete"></i>&nbsp;Liste löschen</button>
  </div>
</div>

<div class="plz-table table-responsive">
  <table class="table table-responsive-sm">
    <thead>
    <tr>
      <th scope="col">PLZ</th>
      <th scope="col">Ort</th>
      <th scope="col">Kanton</th>
      <th scope="col">Flyer</th>
      <th scope="col">Anpassen</th>
      <th scope="col">Map</th>
      <th scope="col">&nbsp;</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>8001</td>
      <td>Zürich</td>
      <td>ZH</td>
      <td>2100</td>
      <td><input type="number" value="2100"></td>
      <td><i class="mdi mdi-crosshairs-gps"></i></td>
      <td><i class="mdi mdi-delete"></i></td>
    </tr>
    <tr>
      <td>8002</td>
      <td>Zürich</td>
      <td>ZH</td>
      <td>2100</td>
      <td><input type="number" value="2100"></td>
      <td><i class="mdi mdi-crosshairs-gps"></i></td>
      <td><i class="mdi mdi-delete"></i></td>
    </tr>
    <tr>
      <td>8003</td>
      <td>Zürich</td>
      <td>ZH</td>
      <td>2100</td>
      <td><input type="number" value="2100"></td>
      <td><i class="mdi mdi-crosshairs-gps"></i></td>
      <td><i class="mdi mdi-delete"></i></td>
    </tr>
    </tbody>
  </table>
</div>

<div class="map-main-container">
  <div #mapContainer id="map-container-angular">
    <div #mapDiv id="map-angular"></div>
    <div #hoverPlzDisplay id="hover-plz-display-angular">PLZ: --</div>
  </div>

  <div #loadingIndicator id="loading-indicator-angular">Loading KML...</div>
</div>

<div class="mt-4 navigation-buttons">
  <p>Anzahl ausgewählter PLZ-Gebiete: {{ selectedPlzIdentifiers.length }}</p>
  <button type="button" class="btn btn-primary" (click)="proceedToNextStep()">
    Weiter zu Design & Druck <i class="bi bi-arrow-right ms-1"></i>
  </button>
</div>


<!-- Nur für Testzwecke, kann entfernt werden -->
<div class="mt-3 p-2 border rounded bg-light-subtle small">
  <p class="mb-1">Test-Buttons für Validierungsstatus:</p>
  <button class="btn btn-sm btn-outline-success me-1" (click)="setExampleStatus('valid')">Set Valid</button>
  <button class="btn btn-sm btn-outline-warning me-1" (click)="setExampleStatus('pending')">Set Pending</button>
  <button class="btn btn-sm btn-outline-danger" (click)="setExampleStatus('invalid')">Set Invalid</button>
</div>
