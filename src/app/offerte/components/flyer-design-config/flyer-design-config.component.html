<div class="flyer-design-config p-3 border rounded bg-light">
  <p class="mb-3">Wählen Sie Ihr gewünschtes Design-Paket:</p>
  <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
    <div *ngFor="let pkg of allPackages" class="col">
      <app-package-card
        [packageData]="pkg"
        [isSelected]="isSelected(pkg.id)"
        (selected)="handlePackageSelection($event)">
      </app-package-card>
    </div>
  </div>

  <div *ngIf="!currentSelectedPackageId" class="alert alert-warning small mt-2">
    Bitte wählen Sie ein Design-Paket aus.
  </div>

  <h5 class="mt-4 mb-3">Paketvergleich</h5>
  <div class="table-responsive">
    <table class="table table-bordered table-hover comparison-table">
      <thead>
      <tr>
        <th scope="col">Feature</th>
        <th *ngFor="let pkg of allPackages" scope="col" class="text-center"
            [class.table-primary]="isSelected(pkg.id)">
          {{ pkg.name }}
          <div *ngIf="pkg.isBestseller && pkg.id !== 'gold'" class="badge bg-success mt-1">Bestseller</div>
          <div *ngIf="pkg.id === 'gold' && pkg.isBestseller" class="badge bg-warning text-dark mt-1">Bestseller</div>

        </th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>Preis</td>
        <td *ngFor="let pkg of allPackages" class="text-center" [class.table-primary]="isSelected(pkg.id)">
            <span *ngIf="pkg.priceDiscounted < pkg.priceNormal" class="text-decoration-line-through text-muted me-2">
              CHF {{ pkg.priceNormal }}
            </span>
          <strong>CHF {{ pkg.priceDiscounted }}</strong>
        </td>
      </tr>
      <tr *ngFor="let feature of comparisonTableFeatures">
        <td>{{ feature.label }}</td>
        <td *ngFor="let pkg of allPackages" class="text-center" [class.table-primary]="isSelected(pkg.id)">
          {{ getFeatureDisplayValue(pkg, feature.key) }}
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
